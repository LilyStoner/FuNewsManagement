@page
@model Assignment1_PRN232_FE.Pages.Admin.DashboardModel
@{
    ViewData["Title"] = "Admin Dashboard";
}

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h1 class="h3 mb-0">Admin Dashboard</h1>
                    <p class="text-muted">Welcome back, @Model.UserName</p>
                </div>
                <div class="d-flex gap-2">
                    <a href="/Admin/Accounts" class="btn btn-primary">
                        <i class="fas fa-users me-2"></i>Manage Accounts
                    </a>
                    <a href="/Admin/Reports" class="btn btn-info">
                        <i class="fas fa-chart-bar me-2"></i>View Reports
                    </a>
                    <a href="/Logout" class="btn btn-outline-secondary">
                        <i class="fas fa-sign-out-alt me-2"></i>Logout
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Statistics Cards -->
    <div class="row mb-4">
        <div class="col-lg-3 col-md-6 mb-4">
            <div class="card bg-primary text-white shadow">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-uppercase mb-1">Total Articles</div>
                            <div class="h5 mb-0 font-weight-bold" id="totalArticles">--</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-newspaper fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-md-6 mb-4">
            <div class="card bg-success text-white shadow">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-uppercase mb-1">Active Articles</div>
                            <div class="h5 mb-0 font-weight-bold" id="activeArticles">--</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-check-circle fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-md-6 mb-4">
            <div class="card bg-warning text-white shadow">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-uppercase mb-1">Total Categories</div>
                            <div class="h5 mb-0 font-weight-bold" id="totalCategories">--</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-folder fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-md-6 mb-4">
            <div class="card bg-info text-white shadow">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-uppercase mb-1">Total Users</div>
                            <div class="h5 mb-0 font-weight-bold" id="totalAccounts">--</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-users fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Articles and Quick Actions -->
    <div class="row">
        <div class="col-lg-8">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Recent News Articles</h6>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered" id="recentArticlesTable">
                            <thead>
                                <tr>
                                    <th>Title</th>
                                    <th>Author</th>
                                    <th>Category</th>
                                    <th>Status</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody id="recentArticlesBody">
                                <tr>
                                    <td colspan="5" class="text-center">Loading...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Quick Actions</h6>
                </div>
                <div class="card-body">
                    <div class="list-group list-group-flush">
                        <a href="/Admin/Accounts" class="list-group-item list-group-item-action">
                            <i class="fas fa-user-plus me-2"></i>Create New Account
                        </a>
                        <a href="/Admin/Reports" class="list-group-item list-group-item-action">
                            <i class="fas fa-chart-line me-2"></i>Generate Report
                        </a>
                        <a href="/News/Active" class="list-group-item list-group-item-action">
                            <i class="fas fa-eye me-2"></i>View Active News
                        </a>
                        <a href="/Categories" class="list-group-item list-group-item-action">
                            <i class="fas fa-folder-open me-2"></i>Manage Categories
                        </a>
                        <a href="/Tags" class="list-group-item list-group-item-action">
                            <i class="fas fa-tags me-2"></i>Manage Tags
                        </a>
                    </div>
                </div>
            </div>

            <!-- System Info -->
            <div class="card shadow">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">System Information</h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <p class="mb-2"><strong>Staff Accounts:</strong> <span id="staffCount">--</span></p>
                            <p class="mb-2"><strong>Lecturer Accounts:</strong> <span id="lecturerCount">--</span></p>
                        </div>
                        <div class="col-sm-6">
                            <p class="mb-2"><strong>Active Categories:</strong> <span id="activeCategories">--</span></p>
                            <p class="mb-2"><strong>Total Tags:</strong> <span id="totalTags">--</span></p>
                        </div>
                    </div>
                    <hr>
                    <p class="mb-0 text-muted"><small>Last updated: <span id="lastUpdated">Just now</span></small></p>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
<script>
$(document).ready(function() {
    loadDashboardData();
});

function loadDashboardData() {
    // In a real implementation, this would make an API call
    // For now, we'll use static data as placeholder
    
    $('#totalArticles').text('127');
    $('#activeArticles').text('98');
    $('#totalCategories').text('15');
    $('#totalAccounts').text('23');
    $('#staffCount').text('15');
    $('#lecturerCount').text('8');
    $('#activeCategories').text('12');
    $('#totalTags').text('45');
    
    // Load recent articles
    loadRecentArticles();
}

function loadRecentArticles() {
    const recentArticles = [
        { title: 'University Announces New Research Center', author: 'John Doe', category: 'Research', status: 'Active', date: '2024-01-15' },
        { title: 'Student Achievement Awards Ceremony', author: 'Jane Smith', category: 'Events', status: 'Active', date: '2024-01-14' },
        { title: 'New Course Offerings for Spring 2024', author: 'Bob Johnson', category: 'Academic', status: 'Active', date: '2024-01-13' },
        { title: 'Campus Infrastructure Updates', author: 'Alice Brown', category: 'Infrastructure', status: 'Draft', date: '2024-01-12' },
        { title: 'International Partnership Agreement', author: 'Mike Wilson', category: 'Partnerships', status: 'Active', date: '2024-01-11' }
    ];
    
    let tbody = '';
    recentArticles.forEach(article => {
        const statusBadge = article.status === 'Active' 
            ? '<span class="badge bg-success">Active</span>'
            : '<span class="badge bg-secondary">Draft</span>';
            
        tbody += `
            <tr>
                <td>${article.title}</td>
                <td>${article.author}</td>
                <td>${article.category}</td>
                <td>${statusBadge}</td>
                <td>${new Date(article.date).toLocaleDateString()}</td>
            </tr>
        `;
    });
    
    $('#recentArticlesBody').html(tbody);
}
</script>
}

<style>
.card {
    border: none;
    border-radius: 15px;
}

.card-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 15px 15px 0 0 !important;
}

.bg-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important; }
.bg-success { background: linear-gradient(135deg, #56CCF2 0%, #2F80ED 100%) !important; }
.bg-warning { background: linear-gradient(135deg, #FFB75E 0%, #ED8F03 100%) !important; }
.bg-info { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important; }

.text-gray-300 { color: rgba(255,255,255,0.8) !important; }

.list-group-item-action:hover {
    background-color: #f8f9fa;
    transform: translateX(5px);
    transition: all 0.2s ease;
}
</style>