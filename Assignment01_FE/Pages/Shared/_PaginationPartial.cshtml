@model Assignment1_PRN232_FE.Models.PaginationInfo
@{
    var getPageUrlFunc = ViewData["GetPageUrlFunc"] as Func<int, string>;
    var getPageSizeUrlFunc = ViewData["GetPageSizeUrlFunc"] as Func<int, string>;
    var pageSizeOptions = ViewData["PageSizeOptions"] as int[] ?? new int[] { 6, 9, 12 };
    var currentPageSize = ViewData["CurrentPageSize"] as int? ?? 9;
}

@if (Model.TotalPages > 1)
{
    <div class="row">
        <div class="col-12">
            <nav aria-label="Pagination" class="d-flex justify-content-center">
                <ul class="pagination">
                    <!-- Previous Button -->
                    <li class="page-item @(!Model.HasPreviousPage ? "disabled" : "")">
                        @if (Model.HasPreviousPage && getPageUrlFunc != null)
                        {
                            <a class="page-link" href="@getPageUrlFunc(Model.CurrentPage - 1)" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                                <span class="sr-only">Previous</span>
                            </a>
                        }
                        else
                        {
                            <span class="page-link" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                                <span class="sr-only">Previous</span>
                            </span>
                        }
                    </li>

                    <!-- First Page -->
                    @if (Model.GetPageNumbers().First() > 1)
                    {
                        <li class="page-item">
                            <a class="page-link" href="@getPageUrlFunc(1)">1</a>
                        </li>
                        @if (Model.GetPageNumbers().First() > 2)
                        {
                            <li class="page-item disabled">
                                <span class="page-link">...</span>
                            </li>
                        }
                    }

                    <!-- Page Numbers -->
                    @foreach (var pageNum in Model.GetPageNumbers())
                    {
                        <li class="page-item @(pageNum == Model.CurrentPage ? "active" : "")">
                            @if (pageNum == Model.CurrentPage)
                            {
                                <span class="page-link">
                                    @pageNum
                                    <span class="sr-only">(current)</span>
                                </span>
                            }
                            else
                            {
                                <a class="page-link" href="@getPageUrlFunc(pageNum)">@pageNum</a>
                            }
                        </li>
                    }

                    <!-- Last Page -->
                    @if (Model.GetPageNumbers().Last() < Model.TotalPages)
                    {
                        @if (Model.GetPageNumbers().Last() < Model.TotalPages - 1)
                        {
                            <li class="page-item disabled">
                                <span class="page-link">...</span>
                            </li>
                        }
                        <li class="page-item">
                            <a class="page-link" href="@getPageUrlFunc(Model.TotalPages)">@Model.TotalPages</a>
                        </li>
                    }

                    <!-- Next Button -->
                    <li class="page-item @(!Model.HasNextPage ? "disabled" : "")">
                        @if (Model.HasNextPage && getPageUrlFunc != null)
                        {
                            <a class="page-link" href="@getPageUrlFunc(Model.CurrentPage + 1)" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                                <span class="sr-only">Next</span>
                            </a>
                        }
                        else
                        {
                            <span class="page-link" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                                <span class="sr-only">Next</span>
                            </span>
                        }
                    </li>
                </ul>
            </nav>

            <!-- Pagination Info -->
            <div class="d-flex justify-content-between align-items-center mt-3">
                <div class="text-muted">
                    <small>
                        Page @Model.CurrentPage of @Model.TotalPages
                        (@Model.TotalItems total items)
                    </small>
                </div>
                @if (getPageSizeUrlFunc != null && pageSizeOptions.Length > 1)
                {
                    <div class="btn-group" role="group" aria-label="Page size options">
                        @foreach (var pageSize in pageSizeOptions)
                        {
                            <a href="@getPageSizeUrlFunc(pageSize)" class="btn btn-outline-secondary btn-sm @(currentPageSize == pageSize ? "active" : "")">
                                @pageSize per page
                            </a>
                        }
                    </div>
                }
            </div>
        </div>
    </div>
}

<style>
.pagination .page-link {
    border-radius: 10px;
    margin: 0 2px;
    border: 1px solid #dee2e6;
    color: #667eea;
    transition: all 0.2s ease;
}

.pagination .page-item.active .page-link {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-color: #667eea;
    color: white;
}

.pagination .page-link:hover {
    background-color: #f8f9fa;
    border-color: #667eea;
    color: #667eea;
}

.pagination .page-item.disabled .page-link {
    color: #6c757d;
    background-color: #fff;
    border-color: #dee2e6;
}

.btn-group .btn-outline-secondary {
    font-size: 0.8rem;
    padding: 0.25rem 0.5rem;
}

.btn-group .btn-outline-secondary.active {
    background-color: #667eea;
    border-color: #667eea;
    color: white;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const paginationLinks = document.querySelectorAll('.pagination a.page-link');
    paginationLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            setTimeout(() => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, 100);
        });
    });
});
</script>